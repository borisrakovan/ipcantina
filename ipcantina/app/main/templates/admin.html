{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
<h1>
    Administrátorský panel
</h1>
<div class="panel panel-default">
    <div class="panel-heading">
        <h2 class="panel-title">Nahrať nové menu</h2>
    </div>
    <div class="panel-body">
        <form method=post enctype=multipart/form-data >
            <input type=file name=file class="file-input">
            <input type=submit name='upload' value='Nahrať' class="btn btn-primary">
        </form>
    </div>
</div>
<hr>
<h3>Nastavenia</h3>
<div class="row" id="admin-settings-form">
    <form action="" method="post" class="form" role="form">
        {{ form.hidden_tag() }}

        <div class="form-group">
            {{ form.instructions.label }}<br>
            {{ form.instructions(cols=30, rows=4, **{'class':'form-control'}) }}
            <p class="help-block">Zadávanie textu podporuje HTML formát</p>
            {% for error in form.instructions.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </div>
        <div class="form-group">
            {{ form.price_A.label }}:
            {{ form.price_A(size=6) }}
            {% for error in form.price_A.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.price_B.label }}:
            {{ form.price_B(size=6) }}
            {% for error in form.price_B.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </div>

        <div class="form-group">
            {{ form.price_C.label }}:
            {{ form.price_C(size=6) }}
            {% for error in form.price_C.errors %}
            <span style="color: red;">[{{ error }}]</span>
            {% endfor %}
        </div>

        <p class="help-block">
            Upozornenie: zmeny v cenách naberú účinnosť až v nasledujúcom týždni.<br>
            Zadané ceny sú ceny ešte pred online zľavou. Táto zľava bude automaticky odpočítaná pri online objednávkach.
        </p>
        <p>{{ form.submit(**{'class': "btn btn-default"}) }}</p>
    </form>
</div>
<hr>
<h3>Zoznam užívateľov</h3>
<table id="user-table">
    <tr>
        <th>Meno</th>
        <th>Spoločnosť</th>
        <th>Email</th>
        <th>Tel. číslo</th>
    </tr>
    {% for user in users %}
    <tr>
        <td><b>{{ user.first_name }} {{ user.surname }}</b></td>
        <td>{{ user.company.title }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.phone }}</td>
    </tr>

    {% endfor %}

</table>
<hr>
<div class="order-list">
    <h3>Všetky objednávky na týždeň <span class="nowrap">{{ days.monday_to_friday_str() }}</span></h3>
    <ul class="list-group">
        {% for i in range(5) %}
        <li class="list-group-item">
            <span class="yellow"><b>{{ days.to_string(days.date_from_int(i)) }} {{ days.svk_from_int(i) }}</b></span>
            {% for order in orders[i] %}
                <div class="group">
                    <b>{{ order.user.first_name }} {{ order.user.surname }}</b> -
                    {{ order.meal.label }}
                    <div class="order-summary-right">
                        <span class="item"> {{ order.amount }}ks</span>
                        <span class="item">{{ "%.2f" % (order.price) }} &euro;</span>
                    </div>
                </div>
            {% endfor %}
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}